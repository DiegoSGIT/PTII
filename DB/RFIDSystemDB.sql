-- MySQL Script generated by MySQL Workbench
-- jue 30 mar 2017 19:03:12 CST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema RFIDSystemDB
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema RFIDSystemDB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `RFIDSystemDB` DEFAULT CHARACTER SET utf8 ;
USE `RFIDSystemDB` ;

-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`ESTABLECIMIENTOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`ESTABLECIMIENTOS` (
  `IDESTABLECIMIENTO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`IDESTABLECIMIENTO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`AREAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`AREAS` (
  `IDAREA` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`IDAREA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`GRUPOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`GRUPOS` (
  `IDGRUPO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`IDGRUPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`EMPLEADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`EMPLEADOS` (
  `IDEMPLEADO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `APELLIDO` VARCHAR(45) NOT NULL,
  `PASSWORD` VARCHAR(45) NOT NULL,
  `GERENTE` TINYINT(1) NOT NULL,
  PRIMARY KEY (`IDEMPLEADO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`VISITANTES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`VISITANTES` (
  `TAG_VISITANTE` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `CORREO` VARCHAR(45) NULL,
  `SALDO` FLOAT NULL,
  `NIP` VARBINARY(100)  NULL,
  `GRUPO_IDGRUPO` INT NOT NULL,
  `AREA_IDAREA` INT NOT NULL,
  `EMPLEADO_IDEMPLEADO` INT NOT NULL,
  PRIMARY KEY (`TAG_VISITANTE`),
  INDEX `fk_VISITANTES_AREAS_idx` (`AREA_IDAREA` ASC),
  INDEX `fk_VISITANTES_GRUPOS_idx` (`GRUPO_IDGRUPO` ASC),
  INDEX `fk_VISITANTES_EMPLEADOS_idx` (`EMPLEADO_IDEMPLEADO` ASC),
  CONSTRAINT `fk_VISITANTES_AREAS`
    FOREIGN KEY (`AREA_IDAREA`)
    REFERENCES `RFIDSystemDB`.`AREAS` (`IDAREA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VISITANTES_GRUPOS`
    FOREIGN KEY (`GRUPO_IDGRUPO`)
    REFERENCES `RFIDSystemDB`.`GRUPOS` (`IDGRUPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VISITANTES_EMPLEADOS`
    FOREIGN KEY (`EMPLEADO_IDEMPLEADO`)
    REFERENCES `RFIDSystemDB`.`EMPLEADOS` (`IDEMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`VENDEDORES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`VENDEDORES` (
  `IDVENDEDOR` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `APELLIDO` VARCHAR(45) NOT NULL,
  `PASSWORD` VARCHAR(45) NOT NULL,
  `ESTABLECIMIENTO_IDESTABLECIMIENTO` INT NOT NULL,
  PRIMARY KEY (`IDVENDEDOR`),
  INDEX `fk_VENDEDORES_ESTABLECIMIENTOS_idx` (`ESTABLECIMIENTO_IDESTABLECIMIENTO` ASC),
  CONSTRAINT `fk_VENDEDORES_ESTABLECIMIENTOS`
    FOREIGN KEY (`ESTABLECIMIENTO_IDESTABLECIMIENTO`)
    REFERENCES `RFIDSystemDB`.`ESTABLECIMIENTOS` (`IDESTABLECIMIENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`COMPRAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`COMPRAS` (
  `IDCOMPRA` INT NOT NULL AUTO_INCREMENT,
  `MONTO` FLOAT NOT NULL,
  `VISITANTE_IDVISITANTE` INT NOT NULL,
  `VENDEDOR_IDVENDEDOR` INT NOT NULL,
  PRIMARY KEY (`IDCOMPRA`),
  INDEX `fk_COMPRAS_VISITANTES_idx` (`VISITANTE_IDVISITANTE` ASC),
  INDEX `fk_COMPRAS_VENDEDORES_idx` (`VENDEDOR_IDVENDEDOR` ASC),
  CONSTRAINT `fk_COMPRAS_VISITANTES`
    FOREIGN KEY (`VISITANTE_IDVISITANTE`)
    REFERENCES `RFIDSystemDB`.`VISITANTES` (`TAG_VISITANTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMPRAS_VENDEDORES`
    FOREIGN KEY (`VENDEDOR_IDVENDEDOR`)
    REFERENCES `RFIDSystemDB`.`VENDEDORES` (`IDVENDEDOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`ARTICULOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`ARTICULOS` (
  `SKU` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(45) NOT NULL,
  `COSTO` FLOAT NOT NULL,
  PRIMARY KEY (`SKU`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RFIDSystemDB`.`COMPRA_ARTICULOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `RFIDSystemDB`.`COMPRA_ARTICULOS` (
  `ARTICULO_IDARTICULO` INT NOT NULL,
  `COMPRA_IDCOMPRA` INT NOT NULL,
  INDEX `fk_COMPRA_ARTICULOS_COMPRAS_idx` (`COMPRA_IDCOMPRA` ASC),
  INDEX `fk_COMPRA_ARTICULOS_ARTICULOS_idx` (`ARTICULO_IDARTICULO` ASC),
  CONSTRAINT `fk_COMPRA_ARTICULOS_COMPRAS`
    FOREIGN KEY (`COMPRA_IDCOMPRA`)
    REFERENCES `RFIDSystemDB`.`COMPRAS` (`IDCOMPRA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMPRA_ARTICULOS_ARTICULOS`
    FOREIGN KEY (`ARTICULO_IDARTICULO`)
    REFERENCES `RFIDSystemDB`.`ARTICULOS` (`SKU`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
